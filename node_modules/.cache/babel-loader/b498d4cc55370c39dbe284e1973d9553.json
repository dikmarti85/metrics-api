{"ast":null,"code":"import _slicedToArray from \"/Users/dimartinez/workspace/metrics-api-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/dimartinez/workspace/metrics-api-fe/src/app/components/ShoppingCart/ShoppingCart.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport useAuth from 'app/hooks/useAuth';\nimport { H6, Small } from '../Typography';\nimport { Box, styled, useTheme } from '@mui/system';\nimport { useNavigate } from 'react-router-dom';\nimport useSettings from 'app/hooks/useSettings';\nimport React, { Fragment, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { themeShadows } from '../MatxTheme/themeColors';\nimport { sideNavWidth, topBarHeight } from 'app/utils/constant';\nimport { getCartList, deleteProductFromCart, updateCartAmount } from 'app/redux/actions/EcommerceActions';\nimport { Icon, Badge, IconButton, Drawer, Button, ThemeProvider } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar StyledIconButton = styled(IconButton)(function (_ref) {\n  var theme = _ref.theme;\n  return {\n    '& span': {\n      color: theme.palette.text.primary\n    },\n    '& #disable': {\n      color: theme.palette.text.disabled\n    }\n  };\n});\nvar MiniCart = styled('div')(function (_ref2) {\n  var theme = _ref2.theme;\n  return {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    width: sideNavWidth\n  };\n});\nvar CartBox = styled('div')(function () {\n  return {\n    padding: '4px',\n    paddingLeft: '16px',\n    display: 'flex',\n    alignItems: 'center',\n    boxShadow: themeShadows[6],\n    height: topBarHeight,\n    '& h5': {\n      marginTop: 0,\n      marginBottom: 0,\n      marginLeft: '16px',\n      fontWeight: '500'\n    }\n  };\n});\nvar ProductBox = styled('div')(function () {\n  return {\n    display: 'flex',\n    alignItems: 'center',\n    padding: '8px 8px',\n    transition: 'background 300ms ease',\n    '&:hover': {\n      background: 'rgba(0,0,0,0.01)'\n    }\n  };\n});\nvar IMG = styled('img')(function () {\n  return {\n    width: 48\n  };\n});\nvar ProductDetails = styled('div')(function () {\n  return {\n    marginRight: '8',\n    textAlign: 'center',\n    flexGrow: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    '& h6': {\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      display: 'block',\n      width: 120,\n      marginBottom: '4px'\n    }\n  };\n});\nvar cartListLoaded = false;\n\nfunction ShoppingCart(_ref3) {\n  _s();\n\n  var _this = this;\n\n  var container = _ref3.container;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      totalCost = _useState2[0],\n      setTotalCost = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      panelOpen = _useState4[0],\n      setPanelOpen = _useState4[1];\n\n  var dispatch = useDispatch();\n  var navigate = useNavigate();\n\n  var _useAuth = useAuth(),\n      user = _useAuth.user;\n\n  var _useSelector = useSelector(function (state) {\n    return state.ecommerce;\n  }),\n      cartList = _useSelector.cartList;\n\n  var _useSettings = useSettings(),\n      settings = _useSettings.settings;\n\n  var theme = useTheme();\n  var secondary = theme.palette.text.secondary;\n\n  if (!cartListLoaded) {\n    dispatch(getCartList(user.id));\n    cartListLoaded = true;\n  }\n\n  var handleDrawerToggle = function handleDrawerToggle() {\n    setPanelOpen(!panelOpen);\n  };\n\n  var handleCheckoutClick = function handleCheckoutClick() {\n    if (totalCost > 0) {\n      navigate('/ecommerce/checkout');\n      setPanelOpen(false);\n    }\n  };\n\n  useEffect(function () {\n    var total = 0;\n    cartList.forEach(function (product) {\n      total += product.price * product.amount;\n    });\n    setTotalCost(total);\n  }, [cartList]);\n\n  var _useTheme = useTheme(),\n      palette = _useTheme.palette;\n\n  var textColor = palette.text.primary;\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: handleDrawerToggle,\n      children: /*#__PURE__*/_jsxDEV(Badge, {\n        color: \"secondary\",\n        badgeContent: cartList.length,\n        children: /*#__PURE__*/_jsxDEV(Icon, {\n          sx: {\n            color: textColor\n          },\n          children: \"shopping_cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ThemeProvider, {\n      theme: settings.themes[settings.activeTheme],\n      children: /*#__PURE__*/_jsxDEV(Drawer, {\n        container: container,\n        variant: \"temporary\",\n        anchor: 'right',\n        open: panelOpen,\n        onClose: handleDrawerToggle,\n        ModalProps: {\n          keepMounted: true\n        },\n        children: /*#__PURE__*/_jsxDEV(MiniCart, {\n          children: [/*#__PURE__*/_jsxDEV(CartBox, {\n            children: [/*#__PURE__*/_jsxDEV(Icon, {\n              color: \"primary\",\n              children: \"shopping_cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            flexGrow: 1,\n            overflow: \"auto\",\n            children: cartList.map(function (product) {\n              return /*#__PURE__*/_jsxDEV(ProductBox, {\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  mr: \"4px\",\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  children: [/*#__PURE__*/_jsxDEV(StyledIconButton, {\n                    size: \"small\",\n                    onClick: function onClick() {\n                      return dispatch(updateCartAmount(user.id, product.id, product.amount + 1));\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Icon, {\n                      sx: {\n                        cursor: 'pinter'\n                      },\n                      children: \"keyboard_arrow_up\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 45\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 41\n                  }, _this), /*#__PURE__*/_jsxDEV(StyledIconButton, {\n                    disabled: !(product.amount - 1),\n                    size: \"small\",\n                    onClick: function onClick() {\n                      return dispatch(updateCartAmount(user.id, product.id, product.amount - 1));\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Icon, {\n                      id: !(product.amount - 1) && 'disable',\n                      children: \"keyboard_arrow_down\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 45\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 41\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 37\n                }, _this), /*#__PURE__*/_jsxDEV(Box, {\n                  mr: 1,\n                  children: /*#__PURE__*/_jsxDEV(IMG, {\n                    src: product.imgUrl,\n                    alt: product.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 41\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 37\n                }, _this), /*#__PURE__*/_jsxDEV(ProductDetails, {\n                  children: [/*#__PURE__*/_jsxDEV(H6, {\n                    children: product.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 41\n                  }, _this), /*#__PURE__*/_jsxDEV(Small, {\n                    sx: {\n                      color: secondary\n                    },\n                    children: [\"$\", product.price, \" x \", product.amount]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 41\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 37\n                }, _this), /*#__PURE__*/_jsxDEV(StyledIconButton, {\n                  size: \"small\",\n                  onClick: function onClick() {\n                    return dispatch(deleteProductFromCart(user.userId, product.id));\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Icon, {\n                    fontSize: \"small\",\n                    children: \"clear\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 41\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 37\n                }, _this)]\n              }, product.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 33\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            sx: {\n              width: '100%',\n              borderRadius: 0\n            },\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: handleCheckoutClick,\n            children: [\"Checkout ($\", totalCost.toFixed(2), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ShoppingCart, \"16Y7PXja8De6ZmqV0k4vcE9oahM=\", false, function () {\n  return [useDispatch, useNavigate, useAuth, useSelector, useSettings, useTheme, useTheme];\n});\n\n_c = ShoppingCart;\nexport default ShoppingCart;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShoppingCart\");","map":{"version":3,"sources":["/Users/dimartinez/workspace/metrics-api-fe/src/app/components/ShoppingCart/ShoppingCart.jsx"],"names":["useEffect","useAuth","H6","Small","Box","styled","useTheme","useNavigate","useSettings","React","Fragment","useState","useDispatch","useSelector","themeShadows","sideNavWidth","topBarHeight","getCartList","deleteProductFromCart","updateCartAmount","Icon","Badge","IconButton","Drawer","Button","ThemeProvider","StyledIconButton","theme","color","palette","text","primary","disabled","MiniCart","height","display","flexDirection","width","CartBox","padding","paddingLeft","alignItems","boxShadow","marginTop","marginBottom","marginLeft","fontWeight","ProductBox","transition","background","IMG","ProductDetails","marginRight","textAlign","flexGrow","whiteSpace","overflow","textOverflow","cartListLoaded","ShoppingCart","container","totalCost","setTotalCost","panelOpen","setPanelOpen","dispatch","navigate","user","state","ecommerce","cartList","settings","secondary","id","handleDrawerToggle","handleCheckoutClick","total","forEach","product","price","amount","textColor","length","themes","activeTheme","keepMounted","map","cursor","imgUrl","title","userId","borderRadius","toFixed"],"mappings":"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","sourcesContent":["import { useEffect } from 'react'\nimport useAuth from 'app/hooks/useAuth'\nimport { H6, Small } from '../Typography'\nimport { Box, styled, useTheme } from '@mui/system'\nimport { useNavigate } from 'react-router-dom'\nimport useSettings from 'app/hooks/useSettings'\nimport React, { Fragment, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { themeShadows } from '../MatxTheme/themeColors'\nimport { sideNavWidth, topBarHeight } from 'app/utils/constant'\nimport {\n    getCartList,\n    deleteProductFromCart,\n    updateCartAmount,\n} from 'app/redux/actions/EcommerceActions'\nimport {\n    Icon,\n    Badge,\n    IconButton,\n    Drawer,\n    Button,\n    ThemeProvider,\n} from '@mui/material'\n\nconst StyledIconButton = styled(IconButton)(({ theme }) => ({\n    '& span': {\n        color: theme.palette.text.primary,\n    },\n    '& #disable': {\n        color: theme.palette.text.disabled,\n    },\n}))\n\nconst MiniCart = styled('div')(({ theme }) => ({\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    width: sideNavWidth,\n}))\n\nconst CartBox = styled('div')(() => ({\n    padding: '4px',\n    paddingLeft: '16px',\n    display: 'flex',\n    alignItems: 'center',\n    boxShadow: themeShadows[6],\n    height: topBarHeight,\n    '& h5': {\n        marginTop: 0,\n        marginBottom: 0,\n        marginLeft: '16px',\n        fontWeight: '500',\n    },\n}))\n\nconst ProductBox = styled('div')(() => ({\n    display: 'flex',\n    alignItems: 'center',\n    padding: '8px 8px',\n    transition: 'background 300ms ease',\n    '&:hover': {\n        background: 'rgba(0,0,0,0.01)',\n    },\n}))\n\nconst IMG = styled('img')(() => ({\n    width: 48,\n}))\n\nconst ProductDetails = styled('div')(() => ({\n    marginRight: '8',\n    textAlign: 'center',\n    flexGrow: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    '& h6': {\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        display: 'block',\n        width: 120,\n        marginBottom: '4px',\n    },\n}))\n\nlet cartListLoaded = false\n\nfunction ShoppingCart({ container }) {\n    const [totalCost, setTotalCost] = useState(0)\n    const [panelOpen, setPanelOpen] = useState(false)\n    const dispatch = useDispatch()\n    const navigate = useNavigate()\n    const { user } = useAuth()\n    const { cartList } = useSelector((state) => state.ecommerce)\n    const { settings } = useSettings()\n    const theme = useTheme()\n    const secondary = theme.palette.text.secondary\n\n    if (!cartListLoaded) {\n        dispatch(getCartList(user.id))\n        cartListLoaded = true\n    }\n\n    const handleDrawerToggle = () => {\n        setPanelOpen(!panelOpen)\n    }\n\n    const handleCheckoutClick = () => {\n        if (totalCost > 0) {\n            navigate('/ecommerce/checkout')\n            setPanelOpen(false)\n        }\n    }\n\n    useEffect(() => {\n        let total = 0\n\n        cartList.forEach((product) => {\n            total += product.price * product.amount\n        })\n        setTotalCost(total)\n    }, [cartList])\n\n    const { palette } = useTheme()\n    const textColor = palette.text.primary\n\n    return (\n        <Fragment>\n            <IconButton onClick={handleDrawerToggle}>\n                <Badge color=\"secondary\" badgeContent={cartList.length}>\n                    <Icon sx={{ color: textColor }}>shopping_cart</Icon>\n                </Badge>\n            </IconButton>\n\n            <ThemeProvider theme={settings.themes[settings.activeTheme]}>\n                <Drawer\n                    container={container}\n                    variant=\"temporary\"\n                    anchor={'right'}\n                    open={panelOpen}\n                    onClose={handleDrawerToggle}\n                    ModalProps={{\n                        keepMounted: true,\n                    }}\n                >\n                    <MiniCart>\n                        <CartBox>\n                            <Icon color=\"primary\">shopping_cart</Icon>\n                            <h5>Cart</h5>\n                        </CartBox>\n\n                        <Box flexGrow={1} overflow=\"auto\">\n                            {cartList.map((product) => (\n                                <ProductBox key={product.id}>\n                                    <Box\n                                        mr=\"4px\"\n                                        display=\"flex\"\n                                        flexDirection=\"column\"\n                                    >\n                                        <StyledIconButton\n                                            size=\"small\"\n                                            onClick={() =>\n                                                dispatch(\n                                                    updateCartAmount(\n                                                        user.id,\n                                                        product.id,\n                                                        product.amount + 1\n                                                    )\n                                                )\n                                            }\n                                        >\n                                            <Icon sx={{ cursor: 'pinter' }}>\n                                                keyboard_arrow_up\n                                            </Icon>\n                                        </StyledIconButton>\n                                        <StyledIconButton\n                                            disabled={!(product.amount - 1)}\n                                            size=\"small\"\n                                            onClick={() =>\n                                                dispatch(\n                                                    updateCartAmount(\n                                                        user.id,\n                                                        product.id,\n                                                        product.amount - 1\n                                                    )\n                                                )\n                                            }\n                                        >\n                                            <Icon id={!(product.amount - 1) && 'disable'}>\n                                                keyboard_arrow_down\n                                            </Icon>\n                                        </StyledIconButton>\n                                    </Box>\n                                    <Box mr={1}>\n                                        <IMG\n                                            src={product.imgUrl}\n                                            alt={product.title}\n                                        />\n                                    </Box>\n                                    <ProductDetails>\n                                        <H6>{product.title}</H6>\n                                        <Small sx={{ color: secondary }}>\n                                            ${product.price} x {product.amount}\n                                        </Small>\n                                    </ProductDetails>\n                                    <StyledIconButton\n                                        size=\"small\"\n                                        onClick={() =>\n                                            dispatch(\n                                                deleteProductFromCart(\n                                                    user.userId,\n                                                    product.id\n                                                )\n                                            )\n                                        }\n                                    >\n                                        <Icon fontSize=\"small\">clear</Icon>\n                                    </StyledIconButton>\n                                </ProductBox>\n                            ))}\n                        </Box>\n\n                        <Button\n                            sx={{ width: '100%', borderRadius: 0 }}\n                            variant=\"contained\"\n                            color=\"primary\"\n                            onClick={handleCheckoutClick}\n                        >\n                            Checkout (${totalCost.toFixed(2)})\n                        </Button>\n                    </MiniCart>\n                </Drawer>\n            </ThemeProvider>\n        </Fragment>\n    )\n}\n\nexport default ShoppingCart\n"]},"metadata":{},"sourceType":"module"}