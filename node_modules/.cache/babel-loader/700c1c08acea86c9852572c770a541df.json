{"ast":null,"code":"import _asyncToGenerator from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/dimartinez/workspace/metrics-api/src/app/views/metrics/CalculateMetricView.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/regenerator/index.js\";\nimport React, { Fragment, lazy, useState } from 'react';\nimport { Autocomplete, Button, Grid, Icon, TextField } from '@mui/material';\nimport { createFilterOptions } from '@mui/material/Autocomplete';\nimport { styled, useTheme } from '@mui/system';\nimport Loadable from \"../../components/Loadable/Loadable\";\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\nimport { DatePicker } from \"@mui/lab\";\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\nimport { ValidatorForm } from \"react-material-ui-form-validator\";\nimport { Span } from \"../../components/Typography\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Result = Loadable(_c2 = /*#__PURE__*/lazy(_c = function _c() {\n  return import(\"./Result\");\n}));\n_c3 = Result;\nvar MetricChart = Loadable(_c5 = /*#__PURE__*/lazy(_c4 = function _c4() {\n  return import(\"./MetricChart\");\n}));\n_c6 = MetricChart;\nvar AutoComplete = styled(Autocomplete)(function () {\n  return {\n    width: 300,\n    marginBottom: '16px'\n  };\n});\n\nvar CalculateMetricView = function CalculateMetricView() {\n  _s();\n\n  var theme = useTheme();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      status = _React$useState2[0],\n      setStatus = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      metrics = _React$useState4[0],\n      setMetrics = _React$useState4[1];\n\n  var _React$useState5 = React.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      source = _React$useState6[0],\n      setSource = _React$useState6[1];\n\n  var _React$useState7 = React.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      valueComboTime = _React$useState8[0],\n      setValueComboTime = _React$useState8[1];\n\n  var _React$useState9 = React.useState(null),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      valueComboMetric = _React$useState10[0],\n      setValueComboMetric = _React$useState10[1];\n\n  var _useState = useState({\n    date: new Date()\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _React$useState11 = React.useState([]),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      labelsX = _React$useState12[0],\n      setLabelsX = _React$useState12[1];\n\n  var handleChange = function handleChange(event) {\n    event.persist();\n    setState(_objectSpread(_objectSpread({}, state), {}, _defineProperty({}, event.target.name, event.target.value)));\n  };\n\n  var handleComboMetricChange = function handleComboMetricChange(event, newValue) {\n    if (newValue && newValue.inputValue) {\n      setValueComboMetric({\n        label: newValue.inputValue\n      });\n      return;\n    }\n\n    setValueComboMetric(newValue);\n  };\n\n  var handleComboTimeChange = function handleComboTimeChange(event, newValue) {\n    if (newValue && newValue.inputValue) {\n      setValueComboTime({\n        label: newValue.inputValue\n      });\n      return;\n    }\n\n    setValueComboTime(newValue);\n  };\n\n  var handleDateChange = function handleDateChange(date) {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      date: date\n    }));\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    var url = 'https://metrics-351617.rj.r.appspot.com/metrics/calc';\n    var data = {\n      dateFrom: nameParam,\n      timeType: \"\",\n      metricName: \"\"\n    };\n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      return res.json();\n    }).catch(function (error) {\n      return console.error('Error:', error);\n    }).then(function (response) {\n      return console.log('Success:', response);\n    });\n    reload();\n  };\n\n  var getData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var resp, data, metricList;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (status) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 3;\n              return fetch(\"https://metrics-351617.rj.r.appspot.com/metrics/\");\n\n            case 3:\n              resp = _context.sent;\n              _context.next = 6;\n              return resp.json();\n\n            case 6:\n              data = _context.sent;\n              metricList = [];\n              data.content.map(function (metric, index) {\n                return metricList.push(metric.name);\n              });\n              setMetrics(metricList);\n              setStatus(true);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var reload = function reload() {\n    return window.location.reload();\n  };\n\n  var name = state.name,\n      value = state.value,\n      date = state.date;\n  var suggestions = [{\n    label: 'MINUTE',\n    value: 'MINUTE'\n  }, {\n    label: 'HOUR minutes',\n    value: 'HOUR'\n  }, {\n    label: 'DAY',\n    value: 'DAY'\n  }, {\n    label: 'MONTH',\n    value: 'MONTH'\n  }];\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ValidatorForm, {\n      onSubmit: handleSubmit,\n      onError: function onError() {\n        return null;\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 6,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          lg: 6,\n          md: 6,\n          sm: 12,\n          xs: 12,\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(AutoComplete, {\n            options: suggestions,\n            getOptionLabel: function getOptionLabel(option) {\n              return option.label;\n            },\n            onChange: handleComboTimeChange,\n            renderInput: function renderInput(params) {\n              return /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, params), {}, {\n                label: \"Select param time\",\n                variant: \"outlined\",\n                fullWidth: true\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 33\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(AutoComplete, {\n            options: metrics,\n            getOptionLabel: function getOptionLabel(option) {\n              return option.label;\n            },\n            onChange: handleComboMetricChange,\n            renderInput: function renderInput(params) {\n              return /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, params), {}, {\n                label: \"Select metric name\",\n                variant: \"outlined\",\n                fullWidth: true\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 33\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(LocalizationProvider, {\n            dateAdapter: AdapterDateFns,\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              value: date,\n              onChange: handleDateChange,\n              renderInput: function renderInput(props) {\n                return /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, props), {}, {\n                  // variant=\"Outlined\"\n                  id: \"mui-pickers-date\",\n                  label: \"Date\",\n                  sx: {\n                    mb: 2,\n                    width: '100%'\n                  }\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 37\n                }, _this);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"primary\",\n        variant: \"contained\",\n        type: \"submit\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          children: \"send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Span, {\n          sx: {\n            pl: 1,\n            textTransform: 'capitalize'\n          },\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: state.date.toLocaleString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(MetricChart, {\n      height: \"350px\",\n      color: [theme.palette.primary.dark, theme.palette.primary.light],\n      values: source\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(CalculateMetricView, \"OMHd+HJ7h0Ng8TDWjXCVkDxMhhM=\", false, function () {\n  return [useTheme];\n});\n\n_c7 = CalculateMetricView;\nexport default CalculateMetricView;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"Result$Loadable$lazy\");\n$RefreshReg$(_c2, \"Result$Loadable\");\n$RefreshReg$(_c3, \"Result\");\n$RefreshReg$(_c4, \"MetricChart$Loadable$lazy\");\n$RefreshReg$(_c5, \"MetricChart$Loadable\");\n$RefreshReg$(_c6, \"MetricChart\");\n$RefreshReg$(_c7, \"CalculateMetricView\");","map":{"version":3,"sources":["/Users/dimartinez/workspace/metrics-api/src/app/views/metrics/CalculateMetricView.jsx"],"names":["React","Fragment","lazy","useState","Autocomplete","Button","Grid","Icon","TextField","createFilterOptions","styled","useTheme","Loadable","AdapterDateFns","DatePicker","LocalizationProvider","ValidatorForm","Span","Result","MetricChart","AutoComplete","width","marginBottom","CalculateMetricView","theme","status","setStatus","metrics","setMetrics","source","setSource","valueComboTime","setValueComboTime","valueComboMetric","setValueComboMetric","date","Date","state","setState","labelsX","setLabelsX","handleChange","event","persist","target","name","value","handleComboMetricChange","newValue","inputValue","label","handleComboTimeChange","handleDateChange","handleSubmit","url","data","dateFrom","nameParam","timeType","metricName","fetch","method","body","JSON","stringify","headers","then","res","json","catch","error","console","response","log","reload","getData","resp","metricList","content","map","metric","index","push","window","location","suggestions","mt","option","params","props","mb","pl","textTransform","toLocaleString","palette","primary","dark","light"],"mappings":"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","sourcesContent":["import React, {Fragment, lazy, useState} from 'react'\nimport {Autocomplete, Button, Grid, Icon, TextField} from '@mui/material'\nimport {createFilterOptions} from '@mui/material/Autocomplete'\nimport {styled, useTheme} from '@mui/system'\nimport Loadable from \"../../components/Loadable/Loadable\"\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\nimport {DatePicker} from \"@mui/lab\";\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\nimport {ValidatorForm} from \"react-material-ui-form-validator\";\nimport {Span} from \"../../components/Typography\";\n\nconst Result = Loadable(lazy(() => import(\"./Result\")))\nconst MetricChart = Loadable(lazy(() => import(\"./MetricChart\")))\n\nconst AutoComplete = styled(Autocomplete)(() => ({\n    width: 300,\n    marginBottom: '16px',\n}))\n\nconst CalculateMetricView = () => {\n    const theme = useTheme()\n\n    const [status, setStatus] = React.useState(false)\n    const [metrics, setMetrics] = React.useState([]);\n    const [source, setSource] = React.useState([])\n    const [valueComboTime, setValueComboTime] = React.useState(null)\n    const [valueComboMetric, setValueComboMetric] = React.useState(null)\n    const [state, setState] = useState({\n        date: new Date(),\n    })\n\n    const [labelsX, setLabelsX] = React.useState([])\n\n    const handleChange = (event) => {\n        event.persist()\n        setState({\n            ...state,\n            [event.target.name]: event.target.value,\n        })\n    }\n\n    const handleComboMetricChange = (event, newValue) => {\n        if (newValue && newValue.inputValue) {\n            setValueComboMetric({\n                label: newValue.inputValue,\n            })\n            return\n        }\n        setValueComboMetric(newValue)\n    }\n\n    const handleComboTimeChange = (event, newValue) => {\n        if (newValue && newValue.inputValue) {\n            setValueComboTime({\n                label: newValue.inputValue,\n            })\n            return\n        }\n        setValueComboTime(newValue)\n    }\n\n    const handleDateChange = (date) => {\n        setState({...state, date})\n    }\n\n    const handleSubmit = (event) => {\n\n        var url = 'https://metrics-351617.rj.r.appspot.com/metrics/calc';\n        var data = {\n            dateFrom: nameParam,\n            timeType: \"\",\n            metricName: \"\"\n        };\n\n        fetch(url, {\n            method: 'POST',\n            body: JSON.stringify(data),\n            headers:{\n                'Content-Type': 'application/json'\n            }\n        }).then(res => res.json())\n            .catch(error => console.error('Error:', error))\n            .then(response => console.log('Success:', response));\n\n        reload()\n\n    }\n\n    const getData = async () => {\n        if(!status){\n            const resp = await fetch(\"https://metrics-351617.rj.r.appspot.com/metrics/\");\n            const data = await resp.json();\n            const metricList = []\n            data.content.map((metric, index) => (\n                metricList.push(metric.name)\n            ))\n            setMetrics(metricList);\n            setStatus(true);\n        }\n    };\n\n    const reload=()=>window.location.reload();\n\n    const {\n        name,\n        value,\n        date,\n    } = state\n\n    const suggestions = [\n        {label: 'MINUTE', value: 'MINUTE'},\n        {label: 'HOUR minutes', value: 'HOUR'},\n        {label: 'DAY', value: 'DAY'},\n        {label: 'MONTH', value: 'MONTH'},\n    ]\n\n    return (\n        <Fragment>\n            <ValidatorForm onSubmit={handleSubmit} onError={() => null}>\n                <Grid container spacing={6}>\n                    <Grid item lg={6} md={6} sm={12} xs={12} sx={{mt: 2}}>\n                        <AutoComplete\n                            options={suggestions}\n                            getOptionLabel={(option) => option.label}\n                            onChange={handleComboTimeChange}\n                            renderInput={(params) => (\n                                <TextField\n                                    {...params}\n                                    label=\"Select param time\"\n                                    variant=\"outlined\"\n                                    fullWidth\n                                />\n                            )}\n                        />\n                        <AutoComplete\n                            options={metrics}\n                            getOptionLabel={(option) => option.label}\n                            onChange={handleComboMetricChange}\n                            renderInput={(params) => (\n                                <TextField\n                                    {...params}\n                                    label=\"Select metric name\"\n                                    variant=\"outlined\"\n                                    fullWidth\n                                />\n                            )}\n                        />\n\n                        <LocalizationProvider dateAdapter={AdapterDateFns}>\n                            <DatePicker\n                                value={date}\n                                onChange={handleDateChange}\n                                renderInput={(props) => (\n                                    <TextField\n                                        {...props}\n                                        // variant=\"Outlined\"\n                                        id=\"mui-pickers-date\"\n                                        label=\"Date\"\n                                        sx={{mb: 2, width: '100%'}}\n                                    />\n                                )}\n                            />\n                        </LocalizationProvider>\n                    </Grid>\n\n                </Grid>\n\n                <Button color=\"primary\" variant=\"contained\" type=\"submit\" onSubmit={handleSubmit}>\n                    <Icon>send</Icon>\n                    <Span sx={{pl: 1, textTransform: 'capitalize'}}>\n                        Send\n                    </Span>\n                </Button>\n                <div>\n                    {state.date.toLocaleString()}\n                </div>\n            </ValidatorForm>\n\n\n\n\n\n\n\n\n\n            {\n            <MetricChart\n                height=\"350px\"\n                color={[\n                    theme.palette.primary.dark,\n                    theme.palette.primary.light,\n                ]}\n                values={source}\n            />\n            }\n\n        </Fragment>\n    )\n}\n\nexport default CalculateMetricView\n"]},"metadata":{},"sourceType":"module"}