{"ast":null,"code":"import _asyncToGenerator from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/dimartinez/workspace/metrics-api/src/app/views/metrics/CalculateMetricView.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/dimartinez/workspace/metrics-api/node_modules/@babel/runtime/regenerator/index.js\";\nimport React, { Fragment, lazy, useEffect, useState } from 'react';\nimport { Autocomplete, Button, Grid, Icon, TextField } from '@mui/material';\nimport { styled, useTheme } from '@mui/system';\nimport Loadable from \"../../components/Loadable/Loadable\";\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\nimport { DatePicker } from \"@mui/lab\";\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\nimport { ValidatorForm } from \"react-material-ui-form-validator\";\nimport { Span } from \"../../components/Typography\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Result = Loadable(_c2 = /*#__PURE__*/lazy(_c = function _c() {\n  return import(\"./Result\");\n}));\n_c3 = Result;\nvar MetricChart = Loadable(_c5 = /*#__PURE__*/lazy(_c4 = function _c4() {\n  return import(\"./MetricChart\");\n}));\n_c6 = MetricChart;\nvar AutoComplete = styled(Autocomplete)(function () {\n  return {\n    width: 300,\n    marginBottom: '16px'\n  };\n});\n\nvar CalculateMetricView = function CalculateMetricView() {\n  _s();\n\n  var theme = useTheme();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      status = _React$useState2[0],\n      setStatus = _React$useState2[1];\n\n  var _React$useState3 = React.useState([{}]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      metrics = _React$useState4[0],\n      setMetrics = _React$useState4[1];\n\n  var _React$useState5 = React.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      source = _React$useState6[0],\n      setSource = _React$useState6[1];\n\n  var _React$useState7 = React.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      valueComboTime = _React$useState8[0],\n      setValueComboTime = _React$useState8[1];\n\n  var _React$useState9 = React.useState(null),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      valueComboMetric = _React$useState10[0],\n      setValueComboMetric = _React$useState10[1];\n\n  var _useState = useState({\n    date: new Date()\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _React$useState11 = React.useState([]),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      labelsX = _React$useState12[0],\n      setLabelsX = _React$useState12[1];\n\n  var handleComboMetricChange = function handleComboMetricChange(event, newValue) {\n    if (newValue && newValue.inputValue) {\n      setValueComboMetric({\n        label: newValue.inputValue\n      });\n      return;\n    }\n\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      metricName: newValue.value\n    }));\n  };\n\n  var handleComboTimeChange = function handleComboTimeChange(event, newValue) {\n    if (newValue && newValue.inputValue) {\n      setValueComboTime({\n        label: newValue.inputValue\n      });\n      return;\n    }\n\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      time: newValue.value\n    }));\n  };\n\n  var handleDateChange = function handleDateChange(date) {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      date: date\n    }));\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    var url = 'https://metrics-351617.rj.r.appspot.com/metrics/calc';\n    var data = {\n      dateFrom: date,\n      timeType: time,\n      metricName: metricName\n    };\n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      return res.json();\n    }).catch(function (error) {\n      return console.error('Error:', error);\n    }).then(function (response) {\n      console.log('Success:', response);\n      setSource(response.labels);\n    });\n  };\n\n  var getData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var resp, data, metricList;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"https://metrics-351617.rj.r.appspot.com/metrics/\");\n\n            case 2:\n              resp = _context.sent;\n              _context.next = 5;\n              return resp.json();\n\n            case 5:\n              data = _context.sent;\n              metricList = [];\n              data.content.forEach(function (metric) {\n                return metricList.push({\n                  label: metric.name,\n                  value: metric.name\n                });\n              });\n              setMetrics(metricList);\n              setStatus(true);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getData();\n  }, []);\n\n  var reload = function reload() {\n    return window.location.reload();\n  };\n\n  var metricName = state.metricName,\n      time = state.time,\n      date = state.date;\n  var optionsMetric = [{\n    label: '',\n    value: ''\n  }];\n  var suggestions = [{\n    label: 'MIN',\n    value: 'MIN'\n  }, {\n    label: 'HOUR',\n    value: 'HOUR'\n  }, {\n    label: 'DAY',\n    value: 'DAY'\n  }, {\n    label: 'MONTH',\n    value: 'MONTH'\n  }];\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ValidatorForm, {\n      onSubmit: handleSubmit,\n      onError: function onError() {\n        return null;\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 6,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          lg: 6,\n          md: 6,\n          sm: 12,\n          xs: 12,\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(AutoComplete, {\n            options: suggestions,\n            getOptionLabel: function getOptionLabel(option) {\n              return option.label;\n            },\n            onChange: handleComboTimeChange,\n            renderInput: function renderInput(params) {\n              return /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, params), {}, {\n                label: \"Select param time\",\n                variant: \"outlined\",\n                fullWidth: true\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 33\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(AutoComplete, {\n            options: metrics,\n            getOptionLabel: function getOptionLabel(option) {\n              return option.label;\n            },\n            onChange: handleComboMetricChange,\n            renderInput: function renderInput(params) {\n              return /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, params), {}, {\n                label: \"Select metric name\",\n                variant: \"outlined\",\n                fullWidth: true\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 33\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(LocalizationProvider, {\n            dateAdapter: AdapterDateFns,\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              value: date,\n              onChange: handleDateChange,\n              renderInput: function renderInput(props) {\n                return /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, props), {}, {\n                  // variant=\"Outlined\"\n                  id: \"mui-pickers-date\",\n                  label: \"Date\",\n                  sx: {\n                    mb: 2,\n                    width: '100%'\n                  }\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 37\n                }, _this);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"primary\",\n        variant: \"contained\",\n        type: \"submit\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          children: \"send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Span, {\n          sx: {\n            pl: 1,\n            textTransform: 'capitalize'\n          },\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(MetricChart, {\n      height: \"350px\",\n      color: [theme.palette.primary.dark, theme.palette.primary.light],\n      values: source\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(CalculateMetricView, \"BP5nJ/M+2YTJcOEu44S6yoyReng=\", false, function () {\n  return [useTheme];\n});\n\n_c7 = CalculateMetricView;\nexport default CalculateMetricView;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"Result$Loadable$lazy\");\n$RefreshReg$(_c2, \"Result$Loadable\");\n$RefreshReg$(_c3, \"Result\");\n$RefreshReg$(_c4, \"MetricChart$Loadable$lazy\");\n$RefreshReg$(_c5, \"MetricChart$Loadable\");\n$RefreshReg$(_c6, \"MetricChart\");\n$RefreshReg$(_c7, \"CalculateMetricView\");","map":{"version":3,"sources":["/Users/dimartinez/workspace/metrics-api/src/app/views/metrics/CalculateMetricView.jsx"],"names":["React","Fragment","lazy","useEffect","useState","Autocomplete","Button","Grid","Icon","TextField","styled","useTheme","Loadable","AdapterDateFns","DatePicker","LocalizationProvider","ValidatorForm","Span","Result","MetricChart","AutoComplete","width","marginBottom","CalculateMetricView","theme","status","setStatus","metrics","setMetrics","source","setSource","valueComboTime","setValueComboTime","valueComboMetric","setValueComboMetric","date","Date","state","setState","labelsX","setLabelsX","handleComboMetricChange","event","newValue","inputValue","label","metricName","value","handleComboTimeChange","time","handleDateChange","handleSubmit","url","data","dateFrom","timeType","fetch","method","body","JSON","stringify","headers","then","res","json","catch","error","console","response","log","labels","getData","resp","metricList","content","forEach","metric","push","name","reload","window","location","optionsMetric","suggestions","mt","option","params","props","mb","pl","textTransform","palette","primary","dark","light"],"mappings":"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","sourcesContent":["import React, {Fragment, lazy, useEffect, useState} from 'react'\nimport {Autocomplete, Button, Grid, Icon, TextField} from '@mui/material'\nimport {styled, useTheme} from '@mui/system'\nimport Loadable from \"../../components/Loadable/Loadable\"\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\nimport {DatePicker} from \"@mui/lab\";\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\nimport {ValidatorForm} from \"react-material-ui-form-validator\";\nimport {Span} from \"../../components/Typography\";\n\nconst Result = Loadable(lazy(() => import(\"./Result\")))\nconst MetricChart = Loadable(lazy(() => import(\"./MetricChart\")))\n\nconst AutoComplete = styled(Autocomplete)(() => ({\n    width: 300,\n    marginBottom: '16px',\n}))\n\nconst CalculateMetricView = () => {\n    const theme = useTheme()\n\n    const [status, setStatus] = React.useState(false)\n    const [metrics, setMetrics] = React.useState([{}]);\n    const [source, setSource] = React.useState([])\n    const [valueComboTime, setValueComboTime] = React.useState(null)\n    const [valueComboMetric, setValueComboMetric] = React.useState(null)\n    const [state, setState] = useState({\n        date: new Date(),\n    })\n\n    const [labelsX, setLabelsX] = React.useState([])\n\n    const handleComboMetricChange = (event, newValue) => {\n        if (newValue && newValue.inputValue) {\n            setValueComboMetric({\n                label: newValue.inputValue,\n            })\n            return\n        }\n        setState({\n            ...state,\n            metricName: newValue.value,\n        })\n    }\n\n    const handleComboTimeChange = (event, newValue) => {\n        if (newValue && newValue.inputValue) {\n            setValueComboTime({\n                label: newValue.inputValue,\n            })\n            return\n        }\n        setState({\n            ...state,\n            time: newValue.value,\n        })\n\n    }\n\n    const handleDateChange = (date) => {\n        setState({...state, date})\n    }\n\n    const handleSubmit = (event) => {\n\n        var url = 'https://metrics-351617.rj.r.appspot.com/metrics/calc';\n        var data = {\n            dateFrom: date,\n            timeType: time,\n            metricName: metricName\n        };\n\n        fetch(url, {\n            method: 'POST',\n            body: JSON.stringify(data),\n            headers:{\n                'Content-Type': 'application/json'\n            }\n        }).then(res => res.json())\n            .catch(error => console.error('Error:', error))\n            .then(response => {\n                console.log('Success:', response)\n\n                setSource(response.labels)\n            });\n    }\n\n    const getData = async () => {\n\n        const resp = await fetch(\"https://metrics-351617.rj.r.appspot.com/metrics/\");\n        const data = await resp.json();\n        let metricList = []\n\n        data.content.forEach((metric) => (\n            metricList.push({label: metric.name, value: metric.name})\n        ))\n\n        setMetrics(metricList);\n        setStatus(true);\n    };\n\n    useEffect(() => {\n        getData();\n    }, []);\n\n    const reload = () => window.location.reload();\n\n    const {\n        metricName,\n        time,\n        date,\n    } = state\n\n    const optionsMetric = [\n        {label: '', value: ''},\n    ]\n\n    const suggestions = [\n        {label: 'MIN', value: 'MIN'},\n        {label: 'HOUR', value: 'HOUR'},\n        {label: 'DAY', value: 'DAY'},\n        {label: 'MONTH', value: 'MONTH'},\n    ]\n\n\n    return (\n        <Fragment>\n            <ValidatorForm onSubmit={handleSubmit} onError={() => null}>\n                <Grid container spacing={6}>\n                    <Grid item lg={6} md={6} sm={12} xs={12} sx={{mt: 2}}>\n                        <AutoComplete\n                            options={suggestions}\n                            getOptionLabel={(option) => option.label}\n                            onChange={handleComboTimeChange}\n                            renderInput={(params) => (\n                                <TextField\n                                    {...params}\n                                    label=\"Select param time\"\n                                    variant=\"outlined\"\n                                    fullWidth\n                                />\n                            )}\n                        />\n                        <AutoComplete\n                            options={metrics}\n                            getOptionLabel={(option) => option.label}\n                            onChange={handleComboMetricChange}\n                            renderInput={(params) => (\n                                <TextField\n                                    {...params}\n                                    label=\"Select metric name\"\n                                    variant=\"outlined\"\n                                    fullWidth\n                                />\n                            )}\n                        />\n\n                        <LocalizationProvider dateAdapter={AdapterDateFns}>\n                            <DatePicker\n                                value={date}\n                                onChange={handleDateChange}\n                                renderInput={(props) => (\n                                    <TextField\n                                        {...props}\n                                        // variant=\"Outlined\"\n                                        id=\"mui-pickers-date\"\n                                        label=\"Date\"\n                                        sx={{mb: 2, width: '100%'}}\n                                    />\n                                )}\n                            />\n                        </LocalizationProvider>\n                    </Grid>\n                </Grid>\n\n                <Button color=\"primary\" variant=\"contained\" type=\"submit\" onSubmit={handleSubmit}>\n                    <Icon>send</Icon>\n                    <Span sx={{pl: 1, textTransform: 'capitalize'}}>\n                        Send\n                    </Span>\n                </Button>\n            </ValidatorForm>\n\n            {\n                <MetricChart\n                    height=\"350px\"\n                    color={[\n                        theme.palette.primary.dark,\n                        theme.palette.primary.light,\n                    ]}\n                    values={source}\n                />\n            }\n\n        </Fragment>\n    )\n}\n\nexport default CalculateMetricView\n"]},"metadata":{},"sourceType":"module"}