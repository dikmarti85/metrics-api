{"ast":null,"code":"import _asyncToGenerator from\"/home/dikmarti/metrics-api/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/dikmarti/metrics-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/dikmarti/metrics-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/dikmarti/metrics-api/node_modules/@babel/runtime/regenerator/index.js\";import{Card,Grid,Button,Checkbox,CircularProgress,FormControlLabel}from'@mui/material';import React,{useState}from'react';import useAuth from'app/hooks/useAuth';import{useNavigate}from'react-router-dom';import{Box,styled,useTheme}from'@mui/system';import{TextValidator,ValidatorForm}from'react-material-ui-form-validator';import{Paragraph,Span}from'app/components/Typography';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FlexBox=styled(Box)(function(){return{display:'flex',alignItems:'center'};});var JustifyBox=styled(FlexBox)(function(){return{justifyContent:'center'};});var ContentBox=styled(Box)(function(){return{height:'100%',padding:'32px',position:'relative',background:'rgba(0, 0, 0, 0.01)'};});var IMG=styled('img')(function(){return{width:'100%'};});var JWTRoot=styled(JustifyBox)(function(){return{background:'#1A2038',minHeight:'100% !important','& .card':{maxWidth:800,borderRadius:12,margin:'1rem'}};});var StyledProgress=styled(CircularProgress)(function(){return{position:'absolute',top:'6px',left:'25px'};});var JwtLogin=function JwtLogin(){var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({email:'sadmin@metrics.com',password:'dummyPass'}),_useState4=_slicedToArray(_useState3,2),userInfo=_useState4[0],setUserInfo=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useAuth=useAuth(),login=_useAuth.login;var handleChange=function handleChange(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;var temp=_objectSpread({},userInfo);temp[name]=value;setUserInfo(temp);};var _useTheme=useTheme(),palette=_useTheme.palette;var textError=palette.error.main;var textPrimary=palette.primary.main;var handleFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return login(userInfo.email,userInfo.password);case 4:navigate('/');_context.next=12;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setMessage(_context.t0.message);setLoading(false);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function handleFormSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(JWTRoot,{children:/*#__PURE__*/_jsx(Card,{className:\"card\",children:/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,lg:5,md:5,sm:5,xs:12,children:/*#__PURE__*/_jsx(JustifyBox,{p:4,height:\"100%\",children:/*#__PURE__*/_jsx(IMG,{src:\"/assets/images/illustrations/dreamer.svg\",alt:\"\"})})}),/*#__PURE__*/_jsx(Grid,{item:true,lg:7,md:7,sm:7,xs:12,children:/*#__PURE__*/_jsx(ContentBox,{children:/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(TextValidator,{sx:{mb:3,width:'100%'},variant:\"outlined\",size:\"small\",label:\"Email\",onChange:handleChange,type:\"email\",name:\"email\",value:userInfo.email,validators:['required','isEmail'],errorMessages:['this field is required','email is not valid']}),/*#__PURE__*/_jsx(TextValidator,{sx:{mb:'12px',width:'100%'},label:\"Password\",variant:\"outlined\",size:\"small\",onChange:handleChange,name:\"password\",type:\"password\",value:userInfo.password,validators:['required'],errorMessages:['this field is required']}),/*#__PURE__*/_jsx(FormControlLabel,{sx:{mb:'12px',maxWidth:288},name:\"agreement\",onChange:handleChange,control:/*#__PURE__*/_jsx(Checkbox,{size:\"small\",onChange:function onChange(_ref3){var checked=_ref3.target.checked;return handleChange({target:{name:'agreement',value:checked}});},checked:userInfo.agreement||true}),label:\"Remeber me\"}),message&&/*#__PURE__*/_jsx(Paragraph,{sx:{color:textError},children:message}),/*#__PURE__*/_jsxs(FlexBox,{mb:2,flexWrap:\"wrap\",children:[/*#__PURE__*/_jsxs(Box,{position:\"relative\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",disabled:loading,type:\"submit\",children:\"Sign in\"}),loading&&/*#__PURE__*/_jsx(StyledProgress,{size:24,className:\"buttonProgress\"})]}),/*#__PURE__*/_jsx(Span,{sx:{mr:1,ml:'20px'},children:\"or\"}),/*#__PURE__*/_jsx(Button,{sx:{textTransform:'capitalize'},onClick:function onClick(){return navigate('/session/signup');},children:\"Sign up\"})]}),/*#__PURE__*/_jsx(Button,{sx:{color:textPrimary},onClick:function onClick(){return navigate('/session/forgot-password');},children:\"Forgot password?\"})]})})})]})})});};export default JwtLogin;","map":null,"metadata":{},"sourceType":"module"}