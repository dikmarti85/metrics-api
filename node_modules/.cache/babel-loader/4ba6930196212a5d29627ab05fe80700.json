{"ast":null,"code":"import _objectSpread from\"/home/dikmarti/metrics-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/dikmarti/metrics-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,lazy}from'react';import{Autocomplete,TextField}from'@mui/material';import{createFilterOptions}from'@mui/material/Autocomplete';import{styled,useTheme}from'@mui/system';import Loadable from\"../../components/Loadable/Loadable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Result=Loadable(/*#__PURE__*/lazy(function(){return import(\"./Result\");}));var MetricChart=Loadable(/*#__PURE__*/lazy(function(){return import(\"./MetricChart\");}));var AutoComplete=styled(Autocomplete)(function(){return{width:300,marginBottom:'16px'};});var suggestions=[{label:'Past 5 minutes',value:'0'},{label:'Past 15 minutes',value:'1'},{label:'Past 30 minutes',value:'2'},{label:'Past 1 hour',value:'3'},{label:'Past 4 hours',value:'4'},{label:'Past 10 hours',value:'5'},{label:'Past 1 day',value:'6'},{label:'Past 2 days',value:'7'},{label:'Past 7 days',value:'8'},{label:'Past 1 month',value:'9'},{label:'Past 3 month',value:'10'},{label:'Past 1 year',value:'11'}];var filter=createFilterOptions();var AutocompleteCombo=function AutocompleteCombo(){var theme=useTheme();var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),source=_React$useState2[0],setSource=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),value=_React$useState4[0],setValue=_React$useState4[1];var _React$useState5=React.useState({isSubmitted:false}),_React$useState6=_slicedToArray(_React$useState5,2),state=_React$useState6[0],setState=_React$useState6[1];var _React$useState7=React.useState({name:'',value:''}),_React$useState8=_slicedToArray(_React$useState7,2),responseData=_React$useState8[0],setResponseData=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),labelsX=_React$useState10[0],setLabelsX=_React$useState10[1];var handleChange=function handleChange(event,newValue){if(newValue&&newValue.inputValue){setValue({label:newValue.inputValue});return;}setValue(newValue);calculateValuesAxisX(newValue.value);setSource(labelsX);console.log('source: '+source);console.log('labels X: '+labelsX);var swUrl=\"https://metrics-351617.rj.r.appspot.com/metrics/\";fetch(swUrl).then(function(response){return response.json();}).then(function(response){console.log(response);setResponseData(response);setState({isSubmitted:true});}).catch(function(error){console.log('error: '+error);});};var filterOptions=function filterOptions(options,params){var filtered=filter(options,params);if(params.inputValue!==''){filtered.push({inputValue:params.inputValue,label:\"Add \\\"\".concat(params.inputValue,\"\\\"\")});}return filtered;};var calculateValuesAxisX=function calculateValuesAxisX(paramTime){var current=new Date();var myPastDate=new Date(current);var labels=[];// 5 minutes\nif(paramTime==0){myPastDate.setMinutes(myPastDate.getMinutes()-5);var initialDate=myPastDate;for(var i=0;i<=5;i++){var hour=initialDate.toLocaleString('en-US',{hour:'2-digit'});var minute=initialDate.toLocaleString('en-US',{minute:'2-digit'});labelsX[i]=\"\".concat(hour,\":\").concat(minute);initialDate.setMinutes(initialDate.getMinutes()+1);}}// 15 minutes\nif(paramTime==1){myPastDate.setMinutes(myPastDate.getMinutes()-15);var _initialDate=myPastDate;for(var i=0;i<=5;i++){var hour=_initialDate.toLocaleString('en-US',{hour:'2-digit'});var minute=_initialDate.toLocaleString('en-US',{minute:'2-digit'});labelsX[i]=\"\".concat(hour,\":\").concat(minute);_initialDate.setMinutes(_initialDate.getMinutes()+3);}}// 30 minutes\nif(paramTime==2){myPastDate.setMinutes(myPastDate.getMinutes()-30);var _initialDate2=myPastDate;for(var i=0;i<=5;i++){var hour=_initialDate2.toLocaleString('en-US',{hour:'2-digit'});var minute=_initialDate2.toLocaleString('en-US',{minute:'2-digit'});labelsX[i]=\"\".concat(hour,\":\").concat(minute);_initialDate2.setMinutes(_initialDate2.getMinutes()+6);}}// 1 hour\nif(paramTime==3){myPastDate.setHours(myPastDate.getHours()-1);var _initialDate3=myPastDate;for(var i=0;i<=5;i++){labelsX[i]=_initialDate3.toLocaleTimeString('en-GB',{hour:'2-digit',minute:'2-digit'});_initialDate3.setMinutes(_initialDate3.getMinutes()+12);}}// 4 hour\nif(paramTime==4){myPastDate.setHours(myPastDate.getHours()-4);var _initialDate4=myPastDate;for(var i=0;i<=5;i++){labelsX[i]=_initialDate4.toLocaleTimeString('en-GB',{hour:'2-digit',minute:'2-digit'});_initialDate4.setMinutes(_initialDate4.getMinutes()+48);}}// 10 hour\nif(paramTime==5){myPastDate.setHours(myPastDate.getHours()-10);var _initialDate5=myPastDate;for(var i=0;i<=5;i++){labelsX[i]=_initialDate5.toLocaleTimeString('en-GB',{hour:'2-digit',minute:'2-digit'});_initialDate5.setMinutes(_initialDate5.getMinutes()+120);}}// 1 day\nif(paramTime==6){myPastDate.setDate(myPastDate.getDate()-1);var _initialDate6=myPastDate;for(var i=0;i<=8;i++){labelsX[i]=_initialDate6.toLocaleTimeString('en-GB',{weekday:\"short\",hour:'2-digit',minute:'2-digit'});_initialDate6.setHours(_initialDate6.getHours()+3);}}// 2 day\nif(paramTime==7){myPastDate.setDate(myPastDate.getDate()-2);var _initialDate7=myPastDate;for(var i=0;i<=8;i++){labelsX[i]=_initialDate7.toLocaleTimeString('en-GB',{weekday:\"short\",hour:'2-digit',minute:'2-digit'});_initialDate7.setHours(_initialDate7.getHours()+6);}}// 7 day\nif(paramTime==8){myPastDate.setDate(myPastDate.getDate()-7);var _initialDate8=myPastDate;for(var i=0;i<=8;i++){labelsX[i]=_initialDate8.toLocaleTimeString('en-GB',{weekday:\"short\",hour:'2-digit',minute:'2-digit'});_initialDate8.setHours(_initialDate8.getHours()+21);}}// 1 month\nif(paramTime==9){myPastDate.setMonth(myPastDate.getMonth()-1);var _initialDate9=myPastDate;for(var i=0;i<=4;i++){var month=_initialDate9.toLocaleString('en-GB',{month:\"short\"});labelsX[i]=\"\".concat(_initialDate9.getDate(),\" \").concat(month);_initialDate9.setHours(_initialDate9.getHours()+180);}}// 3 month\nif(paramTime==10){myPastDate.setMonth(myPastDate.getMonth()-3);var _initialDate10=myPastDate;for(var i=0;i<=6;i++){var month=_initialDate10.toLocaleString('en-GB',{month:\"short\"});labelsX[i]=\"\".concat(_initialDate10.getDate(),\" \").concat(month);_initialDate10.setDate(_initialDate10.getDate()+15);}}// 1 year\nif(paramTime==11){myPastDate.setFullYear(myPastDate.getFullYear()-1);var _initialDate11=myPastDate;for(var i=0;i<=12;i++){var month=_initialDate11.toLocaleString('en-GB',{month:\"short\"});labelsX[i]=\"\".concat(_initialDate11.getFullYear(),\"/\").concat(month);_initialDate11.setMonth(_initialDate11.getMonth()+1);}}setLabelsX(labels);};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(AutoComplete,{options:suggestions,getOptionLabel:function getOptionLabel(option){return option.label;},onChange:handleChange,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Select time\",variant:\"outlined\",fullWidth:true}));}}),/*#__PURE__*/_jsx(MetricChart,{height:\"350px\",color:[theme.palette.primary.dark,theme.palette.primary.light],values:source}),/*#__PURE__*/_jsx(Result,{name:responseData.name,value:responseData.value})]});};export default AutocompleteCombo;","map":null,"metadata":{},"sourceType":"module"}